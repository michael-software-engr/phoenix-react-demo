(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),i=a(1),s=a(7),o=a(8),u=a(10),d=a(9),m=a(11),p=a(2),k=a(4),g=a.n(k),f=function(e){var t=e.currentPath,a=e.path,n=e.children;return t===a?n:null};f.propTypes={currentPath:g.a.string.isRequired,path:g.a.string.isRequired,children:g.a.node.isRequired};var h=f,v="list-item-name",E=function(e){var t=e.groups,a=e.linkClickHandler;return[r.a.createElement("h2",{key:"title",className:"page-title"},"Things To Do"),r.a.createElement("hr",{key:"divider"}),r.a.createElement("section",{key:"group-list-actual",className:"group-list-actual"},t.map(function(e){var t=e.tasks,n=t.filter(function(e){return e.completedAt}).length,l="/groups/".concat(e.id);return r.a.createElement("article",{key:e.key},r.a.createElement("a",{href:l,onClick:function(e){a(l,e)},className:"list-item-grid"},r.a.createElement("div",null,r.a.createElement("img",{src:"/group.svg",alt:"Group"})),r.a.createElement("div",null,r.a.createElement("div",{className:v},e.name),r.a.createElement("div",{className:"progress"},n," OF ",t.length," TASKS COMPLETE"))),r.a.createElement("hr",null))}))]},b=function(e){var t=e.task,a=t.id,n=t.task,l=t.completedAt,c=t.dependencyIds,i=e.allTasks,s=e.toggleTaskHandler;return r.a.createElement("article",null,function(e){var t=e.dependencyIds,a=e.allTasks;return t.find(function(e){var t=a.find(function(t){var a=t.id;return e===a});if(!t)throw Error("Task id '".concat(e,"' not found."));return!t.completedAt})}({dependencyIds:c,allTasks:i})?r.a.createElement("div",{className:"list-item-grid"},r.a.createElement("img",{src:"/locked.svg",alt:"Locked"}),r.a.createElement("span",{className:v},"Locked Task")):r.a.createElement("div",{onClick:function(e){s(a,e)},className:"list-item-grid"},l?r.a.createElement("img",{src:"/completed.svg",alt:"Complete"}):r.a.createElement("img",{src:"/incomplete.svg",alt:"Incomplete"}),r.a.createElement("span",{className:[v,l?"line-through":""].join(" ")},n)),r.a.createElement("hr",null))},j=function(e){var t=e.group,a=t.name,n=t.tasks,l=e.linkClickHandler,c=e.toggleTaskHandler,i=e.allTasks;return r.a.createElement("div",null,r.a.createElement("div",{className:"page-title-row"},r.a.createElement("h2",{className:"page-title debug"},a),r.a.createElement("a",{href:"/",onClick:function(e){l("/",e)},className:"nav-all-groups debug"},"ALL GROUPS")),r.a.createElement("hr",null),n.map(function(e){return r.a.createElement(b,{task:e,allTasks:i,toggleTaskHandler:c,key:e.id})}))},y=(a(20),function(e){var t=e.state,a=e.linkClickHandler,n=e.toggleTaskHandler;if(!t)return r.a.createElement("div",null,"Loading....");var l=t.currentPath,c=t.groups,i=["/"].concat(Object(p.a)(c.map(function(e){var t=e.id;return"/groups/".concat(t)})));return r.a.createElement("main",null,r.a.createElement("div",null),r.a.createElement("div",null,i.includes(l)?[r.a.createElement(h,{currentPath:l,path:"/",key:"/"},r.a.createElement(E,{groups:t.groups,linkClickHandler:a}))].concat(Object(p.a)(c.map(function(e){var c=e.id;return r.a.createElement(h,{currentPath:l,path:"/groups/".concat(c),key:"group-".concat(c)},r.a.createElement(j,{group:e,toggleTaskHandler:n,allTasks:t.allTasks,linkClickHandler:a}))}))):r.a.createElement("div",null,"ERROR: invalid route")),r.a.createElement("div",null))}),O=a(3),T=function(e){return Object.keys(e).reduce(function(t,a){var n=a.split("_"),r=[n[0]].concat(Object(p.a)(n.slice(1).map(function(e){return[e[0].toUpperCase()].concat(Object(p.a)(e.slice(1))).join("")}))).join("");return Object(i.a)({},t,Object(O.a)({},r,e[a]))},{})},w=function(e){var t=e.reduce(function(e,t){var a=t.group,n=a.toLowerCase().replace(new RegExp(" ","g"),"-"),r=e[n],l=r&&r.tasks;return Object(i.a)({},e,Object(O.a)({},n,{id:t.taskGroupId,name:a,tasks:[].concat(Object(p.a)(l||[]),[t])}))},{});return Object.keys(t).map(function(e){return Object(i.a)({},t[e],{key:e})}).sort(function(e,t){return e.id-t.id})},C=function(e,t){var a=t.map(function(t){return e!==t.id?t:t.completedAt?Object(i.a)({},t,{completedAt:null}):Object(i.a)({},t,{completedAt:new Date})});return{allTasks:a,groups:w(a)}},H=function(){return fetch("/api/task_groups").then(function(e){return e.json().then(function(e){var t=e.data,a=t.map(function(e){return Object(i.a)({},T(e),{key:e.name.toLowerCase().replace(new RegExp(" ","g"),"-"),tasks:(a=e.tasks,n=t,a.map(function(e){return Object(i.a)({},T(e),{dependencyIds:e.dependency_ids?e.dependency_ids:[],group:n.find(function(t){return t.id===e.task_group_id}).name})}))});var a,n}),n=a.map(function(e){return e.tasks}).flat();return{groups:a,allTasks:n}})})},N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).toggleTaskHandler=function(e,t){t.preventDefault(),a.setState(function(t){return Object(i.a)({},t,C(e,t.allTasks))})},a.linkClickHandler=function(e,t){t.preventDefault(),a.setState({currentPath:e}),window.history.pushState({},"title - Firefox currently ignores this parameter, although it may use it in the future.",e)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;H().then(function(t){e.setState(Object(i.a)({},t,{currentPath:window.location.pathname||"/"}))})}},{key:"render",value:function(){return this.state?(console.log({state:this.state,path:window.location.pathname}),r.a.createElement(y,{state:this.state,linkClickHandler:this.linkClickHandler,toggleTaskHandler:this.toggleTaskHandler})):r.a.createElement("div",null,"Loading....")}}]),t}(n.Component);c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.9a55ea81.chunk.js.map