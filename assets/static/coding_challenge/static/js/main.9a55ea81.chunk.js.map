{"version":3,"sources":["components/Route.js","lib.js","components/GroupList.js","components/Task.js","components/Group.js","components/Container.js","state/elixir.js","App.js","index.js"],"names":["Route","_ref","currentPath","path","children","propTypes","PropTypes","string","isRequired","node","liGridItemNameCName","GroupList","groups","linkClickHandler","react_default","a","createElement","key","className","map","group","tasks","xOfTasksComplete","filter","task","completedAt","length","groupPath","concat","id","href","onClick","event","src","alt","name","Task","_ref3","_ref3$task","dependencyIds","allTasks","toggleTaskHandler","find","depId","_ref2","Error","isLockedTask","join","Group","_ref$group","components_Task","Container","state","validPaths","Object","toConsumableArray","includes","components_Route","components_GroupList","components_Group","camelizeKeys","obj","keys","reduce","acc","words","split","camelized","slice","word","toUpperCase","objectSpread","defineProperty","buildGroups","groupsByKey","toLowerCase","replace","RegExp","taskGroupId","sort","b","toggleTask","idToToggle","newAllTasks","Date","fetchInitialState","fetch","then","response","json","groupsRawData","data","dependency_ids","task_group_id","flat","App","preventDefault","_this","setState","prevState","window","history","pushState","_this2","this","location","pathname","console","log","components_Container","Component","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.9a55ea81.chunk.js","sourcesContent":["// import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Route = ({ currentPath, path, children }) => (\n  currentPath === path ? children : null\n)\n\nRoute.propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired\n}\n\nexport default Route;\n","export const liGridCName = 'list-item-grid'\nexport const liGridItemNameCName = 'list-item-name'\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { liGridCName, liGridItemNameCName } from '../lib'\n\nconst GroupList = ({ groups, linkClickHandler }) => [\n  <h2 key=\"title\" className=\"page-title\">Things To Do</h2>,\n  <hr key=\"divider\" />,\n\n  <section key=\"group-list-actual\" className=\"group-list-actual\">\n    {\n      groups.map(group => {\n        const { tasks } = group;\n        const xOfTasksComplete = tasks.filter(task => task.completedAt).length\n\n        const groupPath = `/groups/${group.id}`;\n\n        return (\n          <article key={group.key}>\n            <a\n              href={groupPath}\n              onClick={(event) => { linkClickHandler(groupPath, event) }}\n              className={liGridCName}\n            >\n              <div><img src=\"/group.svg\" alt=\"Group\" /></div>\n              <div>\n                <div className={liGridItemNameCName}>{group.name}</div>\n                <div className=\"progress\">{xOfTasksComplete} OF {tasks.length} TASKS COMPLETE</div>\n              </div>\n            </a>\n            <hr />\n          </article>\n        )\n      })\n    }\n  </section>\n]\n\nGroupList.propTypes = {\n  groups: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  linkClickHandler: PropTypes.func.isRequired\n}\n\nexport default GroupList;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { liGridCName, liGridItemNameCName } from '../lib'\n\nconst isLockedTask = ({ dependencyIds, allTasks }) => (\n  dependencyIds.find((depId) => {\n    const task = allTasks.find(({ id }) => depId === id)\n\n    if (!task) throw Error(`Task id '${depId}' not found.`)\n\n    return !task.completedAt;\n  })\n)\n\nconst Task = ({\n  task: { id, task, completedAt, dependencyIds },\n  allTasks,\n  toggleTaskHandler\n}) => (\n  <article>\n    {\n      isLockedTask({ dependencyIds, allTasks }) ? (\n        <div className={liGridCName}>\n          <img src=\"/locked.svg\" alt=\"Locked\" />\n          <span className={liGridItemNameCName}>Locked Task</span>\n        </div>\n      ) : (\n        <div\n          onClick={(event) => { toggleTaskHandler(id, event); }}\n          className={liGridCName}\n        >\n          {\n            completedAt ? (\n              <img src=\"/completed.svg\" alt=\"Complete\" />\n            ) : <img src=\"/incomplete.svg\" alt=\"Incomplete\" />\n          }\n\n          <span\n            className={[liGridItemNameCName, completedAt ? 'line-through' : ''].join(' ')}\n          >\n            {task}\n          </span>\n        </div>\n      )\n    }\n    <hr />\n  </article>\n)\n\nTask.propTypes = {\n  task: PropTypes.shape().isRequired,\n  allTasks: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  toggleTaskHandler: PropTypes.func.isRequired\n}\n\nexport default Task;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Task from './Task';\n\nconst Group = ({ group: { name, tasks }, linkClickHandler, toggleTaskHandler, allTasks }) => (\n  <div>\n    <div className=\"page-title-row\">\n      <h2 className=\"page-title debug\">{name}</h2>\n\n      <a href=\"/\" onClick={(event) => { linkClickHandler('/', event) }} className=\"nav-all-groups debug\">\n        ALL GROUPS\n      </a>\n    </div>\n\n    <hr />\n\n    {\n      tasks.map(task => (\n        <Task\n          task={task}\n          allTasks={allTasks}\n          toggleTaskHandler={toggleTaskHandler}\n          key={task.id}\n        />\n      ))\n    }\n  </div>\n)\n\nGroup.propTypes = {\n  group: PropTypes.shape().isRequired,\n  linkClickHandler: PropTypes.func.isRequired,\n  toggleTaskHandler: PropTypes.func.isRequired,\n  allTasks: PropTypes.arrayOf(PropTypes.shape()).isRequired\n}\n\nexport default Group;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Route from './Route';\nimport GroupList from './GroupList';\nimport Group from './Group';\n\nimport '../App.css'\n\nconst Container = ({ state, linkClickHandler, toggleTaskHandler }) => {\n  if (!state) return <div>Loading....</div>;\n\n  const { currentPath, groups } = state;\n\n  const validPaths = ['/', ...groups.map(({ id }) => `/groups/${id}`)]\n\n  return (\n    <main>\n      <div />\n\n      <div>\n        {\n          validPaths.includes(currentPath) ? [\n            <Route currentPath={currentPath} path=\"/\" key=\"/\">\n              <GroupList groups={state.groups} linkClickHandler={linkClickHandler} />\n            </Route>,\n\n            ...groups.map((group) => {\n              const { id } = group\n              return (\n                <Route currentPath={currentPath} path={`/groups/${id}`} key={`group-${id}`}>\n                  <Group\n                    group={group}\n                    toggleTaskHandler={toggleTaskHandler}\n                    allTasks={state.allTasks}\n                    linkClickHandler={linkClickHandler}\n                  />\n                </Route>\n              )\n            })\n          ] : (\n            <div>ERROR: invalid route</div>\n          )\n        }\n      </div>\n\n      <div />\n    </main>\n  )\n}\n\nContainer.propTypes = {\n  state: PropTypes.shape().isRequired,\n  linkClickHandler: PropTypes.func.isRequired,\n  toggleTaskHandler: PropTypes.func.isRequired\n}\n\nexport default Container;\n","const camelizeKeys = obj => Object.keys(obj).reduce((acc, key) => {\n  const words = key.split('_')\n  const camelized = [\n    words[0],\n    ...words.slice(1).map(word => [word[0].toUpperCase(), ...word.slice(1)].join(''))\n  ].join('')\n\n  return {\n    ...acc,\n    [camelized]: obj[key]\n  }\n}, {})\n\nconst buildTasks = (tasks, groups) => tasks.map(task => ({\n  ...camelizeKeys(task),\n  dependencyIds: task.dependency_ids ? task.dependency_ids : [],\n  group: groups.find(({ id }) => id === task.task_group_id).name\n}))\n\nconst fetchInitialState = () => (\n  fetch('/api/task_groups').then(\n    response => response.json().then(\n      (json) => {\n        const groupsRawData = json.data\n        const groups = groupsRawData.map(group => ({\n          ...camelizeKeys(group),\n          key: group.name.toLowerCase().replace(new RegExp(' ', 'g'), '-'),\n          tasks: buildTasks(group.tasks, groupsRawData)\n        }))\n\n        const allTasks = groups.map(group => group.tasks).flat()\n\n        return { groups, allTasks }\n      }\n    )\n  )\n)\n\nconst buildGroups = (tasks) => {\n  const groupsByKey = tasks.reduce((acc, task) => {\n    const name = task.group;\n    const key = name.toLowerCase().replace(new RegExp(' ', 'g'), '-')\n    const group = acc[key]\n    const tasks = group && group.tasks\n\n    return {\n      ...acc,\n      [key]: {\n        id: task.taskGroupId,\n        name,\n        tasks: [...(tasks ? tasks : []), task]\n      }\n    }\n  }, {})\n\n  return Object.keys(groupsByKey)\n               .map(key => ({ ...groupsByKey[key], key }))\n               .sort((a, b) => a.id - b.id)\n}\n\nexport const toggleTask = (idToToggle, allTasks) => {\n  const newAllTasks = allTasks.map((task) => {\n    if (idToToggle !== task.id) return task;\n\n    const { completedAt } = task\n\n    if (completedAt) return { ...task, completedAt: null }\n\n    return { ...task, completedAt: new Date() }\n  });\n\n  return { allTasks: newAllTasks, groups: buildGroups(newAllTasks) }\n}\n\nexport default fetchInitialState\n","import React, { Component } from 'react'\n\nimport Container from './components/Container';\n\n// import fetchInitialState, { toggleTask } from './state/index'\nimport fetchInitialState, { toggleTask } from './state/elixir'\n\nexport default class App extends Component {\n  componentDidMount() {\n    fetchInitialState().then((data) => {\n      this.setState({ ...data, currentPath: window.location.pathname || '/' })\n    })\n  }\n\n  toggleTaskHandler = (id, event) => {\n    event.preventDefault()\n\n    this.setState((prevState) => ({ ...prevState, ...toggleTask(id, prevState.allTasks) }))\n  }\n\n  linkClickHandler = (currentPath, event) => {\n    event.preventDefault()\n    this.setState({ currentPath })\n    window.history.pushState(\n      {},\n      'title - Firefox currently ignores this parameter, although it may use it in the future.',\n      currentPath\n    );\n  }\n\n  render() {\n    if (!this.state) return <div>Loading....</div>;\n\n    console.log({ state: this.state, path: window.location.pathname })\n\n    return (\n      <Container\n        state={this.state}\n        linkClickHandler={this.linkClickHandler}\n        toggleTaskHandler={this.toggleTaskHandler}\n      />\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}